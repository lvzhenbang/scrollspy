<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="UTF-8">

  <title>fullpage</title>

  <meta name="description" content="">
  <meta name="author" content="Hakim El Hattab">

  <style>
    * {
      margin: 0;
      padding: 0;
    }

    body {
      width: 100%;
      height: 100vh;
      overflow: hidden;
    }

    nav {
      position: fixed;
      left: 3em;
      top: 5em;
      padding: 1em;
      width: 14em;
      line-height: 2;
    }

    nav ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    nav ul ul {
      padding-left: 2em;
    }

    nav li a {
      display: inline-block;
      color: #aaa;
      text-decoration: none;
      -webkit-transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
      transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
    }

    nav li.visible>a {
      color: #111;
      -webkit-transform: translate(5px);
      -ms-transform: translate(5px);
      transform: translate(5px);
    }

    .content {
      margin-left: 16em;
    }

    .item {
      height: 200px;
    }
  </style>
  <script>
    // var _hmt = _hmt || [];
    // (function() {
    //   var hm = document.createElement("script");
    //   hm.src = "https://hm.baidu.com/hm.js?5841e614267dc11b86bc8789d5842593";
    //   var s = document.getElementsByTagName("script")[0]; 
    //   s.parentNode.insertBefore(hm, s);
    // })();
  </script>
</head>

<body>

  <nav class="toc">
    <ul>
      <li><a data-target="intro">Intro</a></li>
      <li>
        <a data-target="dev">Developer Mode</a>
        <ul>
          <li><a data-target="dev-edit-html">Edit HTML</a></li>
          <li><a data-target="dev-element-classes">Element Classes</a></li>
          <li><a data-target="dev-slide-classes">Slide Classes</a></li>
          <li><a data-target="dev-export-html">Export HTML</a></li>
        </ul>
      </li>
      <li>
        <a data-target="css">CSS Editor</a>
        <ul>
          <li><a data-target="css-fonts">Custom Fonts</a></li>
          <li><a data-target="css-developer-mode">Developer Mode</a></li>
          <li><a data-target="css-examples">Examples</a></li>
        </ul>
      </li>
    </ul>
  </nav>

  <article class="content">
    <div class="intro" style="height: 100vh;">
      <h2>Introduction</h2>
    </div>

    <div class="dev" style="height: 100vh;">
      <h2>Developer Mode</h2>

    </div>

    <div class="dev-edit-html" style="height: 100vh;">
      <h3>Editing HTML</h3>

    </div>

    <div class="dev-element-classes" style="height: 100vh;">
      <h3>Element Classes</h3>

    </div>

    <div class="dev-slide-classes" style="height: 100vh;">
      <h3>Slide Classes</h3>

    </div>

    <div class="dev-export-html" style="height: 100vh;">
      <h3>Export HTML</h3>

    </div>

    <div class="css" style="height: 100vh;">
      <h2>CSS Editor</h2>

    </div>
    <div class="css-fonts" style="height: 100vh;">
      <h3>Custom Fonts</h3>

    </div>
    <div class="css-developer-mode" style="height: 100vh;">
      <h3>Developer Mode</h3>

    </div>

    <div class="css-examples" style="height: 100vh;">
      <h3>Examples</h3>
    </div>
  </article>
  <script>
    let items = document.querySelector('ul').querySelectorAll('a');
    let targetObj = {};

    let activeItem = items[0];
    let activeIndex = 0;
    let prevTime = new Date().getTime();

    window.location.hash = items[0].dataset.target;
    items[0].parentNode.classList.add('visible');

    items.forEach((item, index) => {
      let target = document.querySelector(`.${item.dataset.target}`);
      item.addEventListener('click', e => {
        targetScroll(target);
        setActiveItem(item, index);
      });
      targetObj[item.outerHTML] = target;
    });

    window.addEventListener('hashchange', hashHandler);
    window.addEventListener('wheel', scrollHandler);

    function targetScroll(target) {
      target.scrollIntoView({
        behavior: 'smooth',
        block: 'start'
      });
      window.location.hash = target.className;
    }

    function hashHandler() {
      window.removeEventListener('wheel', scrollHandler);
      targetScroll(document.querySelector(`.${window.location.hash.slice(1)}`));
      window.addEventListener('wheel', scrollHandler);
    }

    function setActiveItem(item, index) {
      activeItem.parentNode.classList.remove('visible');
      activeIndex = index;
      activeItem = item;
      activeItem.parentNode.classList.add('visible');
    }

    function scrollHandler(e) {
      const curTime = new Date().getTime();
      let currentIndex = activeIndex;
      let timeDiff = curTime - prevTime;
      prevTime = curTime;

      if (timeDiff > 200) {
        if (e.wheelDelta < 0) {
          currentIndex += 1;
          if (currentIndex > items.length - 1) {
            currentIndex = items.length - 1
          }
        }
        
        if (e.wheelDelta > 0) {
          currentIndex -= 1;
          if (currentIndex < 0) {
            currentIndex = 0;
          }
        }

        setActiveItem(items[currentIndex], currentIndex);
        targetScroll(targetObj[activeItem.outerHTML]);
      }
    }
  </script>

</body>

</html>